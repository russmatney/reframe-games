#+TITLE: Reframe Games

Games built in ClojureScript, with [[https://github.com/reagent-project/reagent][Reagent]], [[https://github.com/day8/re-frame][Re-frame]], [[https://github.com/thheller/shadow-cljs][Shadow-cljs]], and
[[https://github.com/nostalgic-css/NES.css][NES.css]].

This repo will be expanded to include other games, but for now, it's just a
Tetris clone. Check out the live game at [[https://russmatney.itch.io/tetruss][russmatney.itch.io/tetruss]].

* Tetruss
The [[https://tetris.wiki][Tetris Wiki]] has some great Tetris related resources.

**** Ideas, Version 2, and Punted Features/Issues
**** Build and Deploy
***** Building the release
#+BEGIN_SRC sh
# remove 'complied' dir from dev-mode
rm -rf public/js/compiled

# build release version
shadow-cljs release app
#+END_SRC
***** Deploying to s3
#+BEGIN_SRC sh
# deploy to s3
aws s3 sync public/ s3://games.russmatney.com
#+END_SRC

******* Requires aws cli tool:
#+BEGIN_SRC zsh
yay -S aws-cli

# setup creds
aws configure
#+END_SRC

***** Packaging for itch.io
Itch.io requires a .zip of the web-app.

Build as described above, then zip it up.

#+BEGIN_SRC sh
zip -r reframe-games.zip public
#+END_SRC
* [X] Mean-bean Machine clone
**** V1
***** [X] engine basics
***** [X] controls: hold
***** [X] controls: no movement after initial contact
***** [X] score calculated
***** [X] presentation: hold
***** [X] presentation: queue
***** [X] presentation: score
***** [X] presentation: controls
**** [X] ship mvp
***** [X] highlight selected game with mouse
add garden, herb, css live-reload
***** [X] remove highlight from puyo background
***** [X] navigate back to select page from game page (x)
***** [X] restore tetris controls
***** [X] global navigation controls
***** [X] link selection-view to about page
or shows about content
****** [X] make `about` a global event
****** [X] remove about from both games
***** [X] remove about link from game page (in favor of `exit`)
***** [X] set proper cell sizes in all screens
***** [X] set proper board sizes in all screens
***** [X] gameover enabled in page, not in mini player
***** [X] ensure all puyo features (score?)
***** [X] expose controls, about views on main menu
***** [X] build and post update on itch!
* misc todos
**** [X] move entrypoints into grids
**** [X] clean up 'widget' api
**** [X] dry up views into grid/views namespace
**** [X] break build process apart to support multiple apps
**** [ ] dry up timers and pause helpers
**** [ ] dry up db events with helper cofx for sub dbs
**** [ ] add models/model generators and unit-tests
likely with malli
**** [ ] locked-falls should be instant-falls
**** [ ] manual-down should be instant-down
**** [ ] display directional controls more prominently
redo controls view, maybe just show when paused
**** [ ] dry up @rf/subscribe usage with suggested subscribe macro `(<-sub! ::s/current-page])`?
**** [ ] controls fire multiple events (from different sources)
***** [ ] control registration/deregistration
**** [ ] unify cell color 'type' treatment
**** [ ] no keys detected yet overlay with suggestions for clicking?
**** [ ] support navigation? (back button?)
**** [ ] clear console errors
**** [ ] (slightly) better controls layout
**** [ ] selected game with keyboard controls
**** [ ] input controls to both games on select page
**** [ ] instant-fall feature
**** [ ] incorporate spin feature
**** [ ] show combos/rows-to-next-level
**** [ ] faster tick-timeout while locked falls are happening
**** [ ] show controls on the board
**** [ ] mobile touch/gesture support
**** [ ] customizable controls
**** [ ] rotation styles on rows
**** [ ] bullet mode: size-3 pieces, 10x speed
**** [ ] draw your own piece
**** [ ] build up a puzzle/art piece
**** [ ] record and show replay/highlights
**** [ ] shared high-score + leaderboard
**** [ ] configurable pieces and board size
**** [ ] bonus for clearing the screen completely
**** [ ] controls: instant-drop
**** [ ] high-score, custom controls preserved across re-fresh
**** [ ] rows-to-next-level visual indication
**** [ ] refactor colors into view, rather than attached to cells
**** [ ] 'doom' face - show emotion during left/right/rotate/score
**** [ ] Add achievements
**** [ ] poster-ized level clears (gunn style)
***** include current game state metadata
**** [ ] display character commentary per piece played
**** [ ] rotate in two directions
**** [ ] show 'ghost' piece (for fast drop)
**** [ ] mobile detection and 'alert'?
**** [ ] pause doesn't always stop the clock?
**** [ ] add a robot to make moves when no one has for a while
something for leaving it on
**** [ ] create the menu as the game itself
**** [ ] send multiple controls events per each - allow for multi-register
just overwrite for now? or fire both controls? both i think?
make it easy to register/deregister them.
**** [ ] create controls page for connecting events and keys
let the user write the controls/db.cljs
* Contributing
My intention for this repository is to build some things from scratch on my
own - selfishly, I'm somewhat closed-minded to contributions.

I'm open to talking about the things in here via PRs and Issues, and I encourage
you to fork and do what you want with the code!

My motivation for developing this in the public:
- to share the code as an example
- to get feedback
- (hopefully) to inspire others to build things!
